#!/usr/bin/env python3
import sys
from url_classification import classify_url

def install_dependencies():
    print("Installing dependencies.")

def process_url_file(url_file_path):
    try:
        with open(url_file_path, "r") as f:
            urls = [line.strip() for line in f if line.strip()]
    except FileNotFoundError:
        print(f"Error: File '{url_file_path}' not found.")
        sys.exit(1)

    for url in urls:
        print(url, "->", classify_url(url))

def run_tests():
    assert classify_url("https://huggingface.co/datasets/xlangai/AgentNet") == "DATASET"
    assert classify_url("https://huggingface.co/google/gemma-3-270m/tree/main") == "MODEL"
    assert classify_url("https://github.com/SkyworkAI/Matrix-Game") == "CODE"
    assert classify_url("https://hello.com") == "UNKNOWN"
    print("Works")

def main():
    if len(sys.argv) < 2:
        print("Usage: ./run [install|test|URL_FILE]")
        sys.exit(1)

    cmd = sys.argv[1]

    if cmd == "install":
        install_dependencies()
    elif cmd == "test":
        run_tests()
    else:
        process_url_file(cmd)

if __name__ == "__main__":
    main()
